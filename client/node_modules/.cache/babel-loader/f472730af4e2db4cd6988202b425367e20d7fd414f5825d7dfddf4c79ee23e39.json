{"ast":null,"code":"import u from 'updeep';\nimport throttle from 'lodash/throttle';\nimport { applyMiddleware, createStore, compose } from 'redux';\nimport get from 'lodash/get';\nimport promiseMiddleware from 'redux-promise-middleware';\nimport thunk from 'redux-thunk';\nimport { setError } from './actions';\nimport environment from './utils/environment';\nimport { initialState } from './config';\nconst saveLocalStorageThrottle = throttle(store => {\n  localStorage.setItem('redux', JSON.stringify(store.getState()));\n}, 100);\nconst saveLocalStorageMiddleware = store => next => action => {\n  saveLocalStorageThrottle(store);\n  return next(action);\n};\nconst crashReporter = _store => next => action => {\n  try {\n    return next(action);\n  } catch (error) {\n    return next(setError({\n      isFatal: false,\n      errorClass: 'unexpected-frontend',\n      message: get(error, 'message', error)\n    }));\n  }\n};\nlet middleware = [crashReporter, promiseMiddleware(), thunk];\nif (environment.isDevelopment()) {\n  // This is useful to graph redux state via Capybara\n  // #evaluate_script during feature specs.\n  middleware = [saveLocalStorageMiddleware, ...middleware];\n}\nexport const createEddieStore = () => createStore((state = initialState, {\n  payload = {}\n}) => u(payload, state), compose(applyMiddleware(...middleware), /* eslint-disable no-underscore-dangle */\nwindow._REDUX_DEVTOOLS_EXTENSION_ ? window._REDUX_DEVTOOLS_EXTENSION_() : f => f));\nconst store = createEddieStore();\nexport default store;","map":{"version":3,"names":["u","throttle","applyMiddleware","createStore","compose","get","promiseMiddleware","thunk","setError","environment","initialState","saveLocalStorageThrottle","store","localStorage","setItem","JSON","stringify","getState","saveLocalStorageMiddleware","next","action","crashReporter","_store","error","isFatal","errorClass","message","middleware","isDevelopment","createEddieStore","state","payload","window","_REDUX_DEVTOOLS_EXTENSION_","f"],"sources":["/Users/sidharthabolla/MySchoolBus/client/src/store.js"],"sourcesContent":["import u from 'updeep';\nimport throttle from 'lodash/throttle';\nimport { applyMiddleware, createStore, compose } from 'redux';\nimport get from 'lodash/get';\nimport promiseMiddleware from 'redux-promise-middleware';\nimport thunk from 'redux-thunk';\nimport { setError } from './actions';\nimport environment from './utils/environment';\nimport { initialState } from './config';\n\nconst saveLocalStorageThrottle = throttle((store) => {\n  localStorage.setItem('redux', JSON.stringify(store.getState()));\n}, 100);\n\nconst saveLocalStorageMiddleware = (store) => (next) => (action) => {\n  saveLocalStorageThrottle(store);\n  return next(action);\n};\n\nconst crashReporter = (_store) => (next) => (action) => {\n  try {\n    return next(action);\n  } catch (error) {\n    return next(setError({\n      isFatal: false,\n      errorClass: 'unexpected-frontend',\n      message: get(error, 'message', error)\n    }));\n  }\n};\n\nlet middleware = [\n  crashReporter,\n  promiseMiddleware(),\n  thunk\n];\n\nif (environment.isDevelopment()) {\n  // This is useful to graph redux state via Capybara\n  // #evaluate_script during feature specs.\n  middleware = [\n    saveLocalStorageMiddleware,\n    ...middleware\n  ];\n}\n\nexport const createEddieStore = () => createStore(\n  (state = initialState, { payload = {} }) => u(payload, state),\n  compose(\n    applyMiddleware(...middleware),\n    /* eslint-disable no-underscore-dangle */\n    window._REDUX_DEVTOOLS_EXTENSION_ ? window._REDUX_DEVTOOLS_EXTENSION_() : (f) => f\n  )\n);\n\nconst store = createEddieStore();\nexport default store;"],"mappings":"AAAA,OAAOA,CAAC,MAAM,QAAQ;AACtB,OAAOC,QAAQ,MAAM,iBAAiB;AACtC,SAASC,eAAe,EAAEC,WAAW,EAAEC,OAAO,QAAQ,OAAO;AAC7D,OAAOC,GAAG,MAAM,YAAY;AAC5B,OAAOC,iBAAiB,MAAM,0BAA0B;AACxD,OAAOC,KAAK,MAAM,aAAa;AAC/B,SAASC,QAAQ,QAAQ,WAAW;AACpC,OAAOC,WAAW,MAAM,qBAAqB;AAC7C,SAASC,YAAY,QAAQ,UAAU;AAEvC,MAAMC,wBAAwB,GAAGV,QAAQ,CAAEW,KAAK,IAAK;EACnDC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEC,IAAI,CAACC,SAAS,CAACJ,KAAK,CAACK,QAAQ,CAAC,CAAC,CAAC,CAAC;AACjE,CAAC,EAAE,GAAG,CAAC;AAEP,MAAMC,0BAA0B,GAAIN,KAAK,IAAMO,IAAI,IAAMC,MAAM,IAAK;EAClET,wBAAwB,CAACC,KAAK,CAAC;EAC/B,OAAOO,IAAI,CAACC,MAAM,CAAC;AACrB,CAAC;AAED,MAAMC,aAAa,GAAIC,MAAM,IAAMH,IAAI,IAAMC,MAAM,IAAK;EACtD,IAAI;IACF,OAAOD,IAAI,CAACC,MAAM,CAAC;EACrB,CAAC,CAAC,OAAOG,KAAK,EAAE;IACd,OAAOJ,IAAI,CAACX,QAAQ,CAAC;MACnBgB,OAAO,EAAE,KAAK;MACdC,UAAU,EAAE,qBAAqB;MACjCC,OAAO,EAAErB,GAAG,CAACkB,KAAK,EAAE,SAAS,EAAEA,KAAK;IACtC,CAAC,CAAC,CAAC;EACL;AACF,CAAC;AAED,IAAII,UAAU,GAAG,CACfN,aAAa,EACbf,iBAAiB,CAAC,CAAC,EACnBC,KAAK,CACN;AAED,IAAIE,WAAW,CAACmB,aAAa,CAAC,CAAC,EAAE;EAC/B;EACA;EACAD,UAAU,GAAG,CACXT,0BAA0B,EAC1B,GAAGS,UAAU,CACd;AACH;AAEA,OAAO,MAAME,gBAAgB,GAAGA,CAAA,KAAM1B,WAAW,CAC/C,CAAC2B,KAAK,GAAGpB,YAAY,EAAE;EAAEqB,OAAO,GAAG,CAAC;AAAE,CAAC,KAAK/B,CAAC,CAAC+B,OAAO,EAAED,KAAK,CAAC,EAC7D1B,OAAO,CACLF,eAAe,CAAC,GAAGyB,UAAU,CAAC,EAC9B;AACAK,MAAM,CAACC,0BAA0B,GAAGD,MAAM,CAACC,0BAA0B,CAAC,CAAC,GAAIC,CAAC,IAAKA,CACnF,CACF,CAAC;AAED,MAAMtB,KAAK,GAAGiB,gBAAgB,CAAC,CAAC;AAChC,eAAejB,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}